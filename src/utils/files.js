
const MAX_FILE_SIZE = 2000000;

export async function readFile(file) {

    if (global.dev) console.log("readFile", file);
    let data = null;
    if (!file) {
        console.warn(`No valid file selected`);
    } else if (file.size > MAX_FILE_SIZE) {
        console.warn(`${file.name}: file too big, ${file.size}`);
    } else {
        // json(): Takes a Response stream and reads it to completion. It returns a promise that resolves
        //         with the result of parsing the body text as JSON.
        data = await new Response(file).json();
    }
    // files too big are ignored
    return data;
}
/* 

https://studiocode.dev/microfreak-reader/?data=N4IgZg7iBcAMA0IB2BDAtgUxiAIgSwGcAnDAgBwwGMAXMAVwBsREC6yyB7I6jAExjAoGBDIl4pqKGAG1pCAMwBWeAA4AbPDUB2eFoCcmlaoAs8AIwAmM-ARnL52Nb0H7K5W90IEKhHp13TPwcDYwNnc3MzX2U9ZS1vX38zYwBdeGljIyCog0VfFyj4eQt4Y2sEeNVEyMD-WFzrDXC7BWs83UaNKPLI21hvEpaHeXhwi1T0r01TNVMlVQ1tTxtDE3MrSMHHUYNB9f8LHUqluySuuxWorZLwhEUjeUWVNOlZ1S3rO2U7JwNbQ8uALe8zUBi01lCqzeWiSn36Dl%208EGAP%20R2sKi23zM322WjUL1sZiMUSyfxWFR6GIcWJx6JGJM2K1u5I6yyCfWJsCMeMinNJNhebS6T10gwuDKiU2ZU3BbJ0HIcRhU9K5jOlLOOOIKnzMWkF50JTTJlgOOjeCjiMU5CFBrIZfRxfURUxlFTCBSaSU5ZhegQMGmMJUDmgM6gRl1VPx20Z6UzU3LFcOtMZZFQpit0sIJDid0ZKMsphNM3UiyjUWsZ%20QcLOBZeURcZxwK1T0z0mGZLzRrZKp2UKURViJGLs0Zs5WP5WyR7n9SpuZxe3ujvgDi1Dw8iLlgWL6IzG9ZrSvpGyG4WZsZDqnp9iiikXMe2zUKcYeJXj1IfiKGI6W79vNWjel9mA21lXDOwRn0bNTxcGs5gPHlKn0S8wKiWpzHOD5o2UCwcLLeVVn-Ox%20XsLxs3fXsznDdVYlKWcr3WHUqz9CITWAyoqRLQ0AKI2A912AV2zeWtL1ldp3wqWEc2o2CR01SJzk9ZcHB0dU00MaDH1DLCGXPcwHjRBjTlLBSmTqHdlLkioum2AdRion5sy7ON4NZXMhllHx7IAoJigcRNehTNi2JtUNqiGEtdL0bMN3TLyowZN5LEaJJuK7SwDzYzyGy%20Uyw0JJM81MV1szDBLI11YIZKKfz1i6IFXNQjZCTidEcuxcCzA0CoRnfNSOlK9raVMtRFKZMkXwY9leWquTKSxGycXHUzkqciaVhEmEzNMpDVKo21CSrfrKkk7y7EWMaYOzObNBpEyHWGQLIWZDcSllcsTNy3iNyGdpmQQn0hLur7t0e36emZQJpiKfDLguSFfzBCF3VTDazSR%20A8l9ZTgqBI4NBO3QUZ-HQVCMQkxRYkmVi0YbksswS5GhkEpPE9GaeRhmbQI20xKrEdud0Am3Us67R1UYkb2SLm0d0OmNn6m1XJOC47hS0TOduQVofCRHWT%209a43x5ZkP5mtScl-MfMN8Xac0z4FZt80YfFqNFDfdnZQQZ6nfZrr9bN2i2O0bNEJF-rhItxkAmU%20QN3kGYjnl50IiD7YRJVtp5HIz3NZtwXebaM3qbDomGfkRpE4l6PkjW1Gllp8N-hTlyXcFt2q8Lujxvr3PswN3uhZp8P1rJ8XvEt63UcFxvIsd8kxYz1nYdC1kfen8Wu4HgXbeFsutfbI3q7sSmZZn5Oe5-Rqfo2D6RNQ2yzGz9skJspiwf9tDSmjNRUXY9FlpVhLJxDq50Uw3VlH2N%20Lw-I8kioUcI8UAQhVZA-bUkQdQ2WKt3ZyHMGJ9HQQlT%20sBTAG2ghqOkVUowFRWiQzGX5UaeRVIQ8U-s%20ikJuLJDaExpCWA0H5XGppgKCOEcgsRQiRGSPEaIiR0ipGyIUfsQUciVGKPkTIjR6itGqM0To7Rep0j6N0WovRpiTHmOMZY-RKQ0ggEoBIGAKgAC%20QA

https://studiocode.dev/microfreak-reader/?data=N4IgZg7iBcAMA0IB2BDAtgUxiAIgSwGcAnDAgBwwGMAXMAVwBsREC6yyB7I6jAExjAoGBDIl4pqKGAG1pCAMwBWeAA4AbPDUB2eFoCcmlaoAs8AIwAmM-ARnL52Nb0H7K5W90IEKhHp13TPwcDYwNnc3MzX2U9ZS1vX38zYwBdeGljIyCog0VfFyj4eQt4Y2sEeNVEyMD-WFzrDXC7BWs83UaNKPLI21hvEpaHeXhwi1T0r01TNVMlVQ1tTxtDE3MrSMHHUYNB9f8LHUqluySuuxWorZLwhEUjeUWVNOlZ1S3rO2U7JwNbQ8uALe8zUBi01lCqzeWiSn36Dl%208EGAP%20R2sKi23zM322WjUL1sZiMUSyfxWFR6GIcWJx6JGJM2K1u5I6yyCfWJsCMeMinNJNhebS6T10gwuDKiU2ZU3BbJ0HIcRhU9K5jOlLOOOIKnzMWkF50JTTJlgOOjeCjiMU5CFBrIZfRxfURUxlFTCBSaSU5ZhegQMGmMJUDmgM6gRl1VPx20Z6UzU3LFcOtMZZFQpit0sIJDid0ZKMsphNM3UiyjUWsZ%20QcLOBZeURcZxwK1T0z0mGZLzRrZKp2UKURViJGLs0Zs5WP5WyR7n9SpuZxe3ujvgDi1Dw8iLlgWL6IzG9ZrSvpGyG4WZsZDqnp9iiikXMe2zUKcYeJXj1IfiKGI6W79vNWjel9mA21lXDOwRn0bNTxcGs5gPHlKn0S8wKiWpzHOD5o2UCwcLLeVVn-Ox%20XsLxs3fXsznDdVYlKWcr3WHUqz9CITWAyoqRLQ0AKI2A912AV2zeWtL1ldp3wqWEc2o2CR01SJzk9ZcHB0dU00MaDH1DLCGXPcwHjRBjTlLBSmTqHdlLkioum2AdRion5sy7ON4NZXMhllHx7IAoJigcRNehTNi2JtUNqiGEtdL0bMN3TLyowZN5LEaJJuK7SwDzYzyGy%20Uyw0JJM81MV1szDBLI11YIZKKfz1i6IFXNQjZCTidEcuxcCzA0CoRnfNSOlK9raVMtRFKZMkXwY9leWquTKSxGycXHUzkqciaVhEmEzNMpDVKo21CSrfrKkk7y7EWMaYOzObNBpEyHWGQLIWZDcSllcsTNy3iNyGdpmQQn0hLur7t0e36emZQJpiKfDLguSFfzBCF3VTDazSR%20A8l9ZTgqBI4NBO3QUZ-HQVCMQkxRYkmVi0YbksswS5GhkEpPE9GaeRhmbQI20xKrEdud0Am3Us67R1UYkb2SLm0d0OmNn6m1XJOC47hS0TOduQVofCRHWT%209a43x5ZkP5mtScl-MfMN8Xac0z4FZt80YfFqNFDfdnZQQZ6nfZrr9bN2i2O0bNEJF-rhItxkAmU%20QN3kGYjnl50IiD7YRJVtp5HIz3NZtwXebaM3qbDomGfkRpE4l6PkjW1Gllp8N-hTlyXcFt2q8Lujxvr3PswN3uhZp8P1rJ8XvEt63UcFxvIsd8kxYz1nYdC1kfen8Wu4HgXbeFsutfbI3q7sSmZZn5Oe5-Rqfo2D6RNQ2yzGz9skJspiwf9tDSmjNRUXY9FlpVhLJxDq50Uw3VlH2N%20Lw-I8kioUcI8UAQhVZA-bUkQdQ2WKt3ZyHMGJ9HQQlT%20sBTAG2ghqOkVUowFRWiQzGX5UaeRVIQ8U-s%20ikJuLJDaExpCWA0H5XGppgKCOEcgsRQiRGSPEaIiR0ipGyIUfsQUciVGKPkTIjR6itGqM0To7Rep0j6N0WovRpiTHmOMZY-RKQ0ggEoBIGAKgAC%20QA


*/